@using NN.POS.Web.Extensions
@using NN.POS.Web.Constants
<MudNavMenu>
    
    <MudNavGroup Title="Settings" Expanded="@(NavbarStateService.Value is RouteName.Settings)">
        <MudNavLink ActiveClass="@(GetActiveClass(NavbarStateService.ActiveValue == RouteName.Company))"
                    Href="@RouteName.Company">Company</MudNavLink>
        <MudNavLink ActiveClass="@(GetActiveClass(NavbarStateService.ActiveValue == RouteName.Branch))"
                    Href="@RouteName.Branch">Branch</MudNavLink>
        
        <MudNavLink ActiveClass="@(GetActiveClass(NavbarStateService.ActiveValue == RouteName.Warehouse))"
                    Href="@RouteName.Warehouse">Warehouse</MudNavLink>

        <MudNavLink ActiveClass="@(GetActiveClass(NavbarStateService.ActiveValue == RouteName.Currency))"
                    Href="@RouteName.Currency">Currency</MudNavLink>
        
        <MudNavLink ActiveClass="@(GetActiveClass(NavbarStateService.ActiveValue == RouteName.Tax))"
                    Href="@RouteName.Tax">Tax</MudNavLink>
    </MudNavGroup>

    <MudNavGroup Title="Contacts" Expanded="@(NavbarStateService.Value == RouteName.Contact)">
        <MudNavLink ActiveClass="@(GetActiveClass(NavbarStateService.ActiveValue == RouteName.Supplier))"
                    Href="@RouteName.Supplier">Suppliers</MudNavLink>

        <MudNavLink ActiveClass="@(GetActiveClass(NavbarStateService.ActiveValue == RouteName.Customers))"
                    Href="@RouteName.Customers">Customers</MudNavLink>

        <MudNavLink ActiveClass="@(GetActiveClass(NavbarStateService.ActiveValue == RouteName.CustomerGroups))"
                    Href="@RouteName.CustomerGroups">Customer Groups</MudNavLink>
    </MudNavGroup>

    <MudNavGroup Title="User Management" Expanded="@(NavbarStateService.Value == RouteName.UsersManagement)">
        <MudNavLink ActiveClass="@(GetActiveClass(NavbarStateService.ActiveValue == RouteName.Users))"
                    Href="@RouteName.Users">Users</MudNavLink>

        <MudNavLink ActiveClass="@(GetActiveClass(NavbarStateService.ActiveValue == RouteName.Roles))"
                    Href="@RouteName.Roles">Roles</MudNavLink>

    </MudNavGroup>

    <MudNavGroup Title="Products" Expanded="@(NavbarStateService.Value is RouteName.Products or RouteName.UnitOfMeasure)">

        <MudNavLink ActiveClass="@(GetActiveClass(NavbarStateService.ActiveValue == RouteName.PriceList))"
                    Href="@RouteName.PriceList">Price Lists</MudNavLink>

        <MudNavLink ActiveClass="@(GetActiveClass(NavbarStateService.ActiveValue == RouteName.ItemMasterData))"
                    Href="@RouteName.ItemMasterData">Item Master Data</MudNavLink>

        <MudNavGroup Title="Unit of Measure" Expanded="@(NavbarStateService.Value == RouteName.UnitOfMeasure)">
            <MudNavLink ActiveClass="@(GetActiveClass(NavbarStateService.ActiveValue == RouteName.Uom))"
                        Href="@RouteName.Uom">Uom</MudNavLink>
            <MudNavLink ActiveClass="@(GetActiveClass(NavbarStateService.ActiveValue == RouteName.UomGroup))"
                        Href="@RouteName.UomGroup">Uom Group</MudNavLink>
        </MudNavGroup>
    </MudNavGroup>
</MudNavMenu>

@code
{

    protected override void OnInitialized()
    {
        
        NavigationManager.LocationChanged += (_, _) => StateHasChanged();
        base.OnInitialized();
    }

    private string GetActiveClass(bool isActive)
    {
        return isActive ? "active" : "";
    }
}
